%h1#scientific_name= @species.name

%table#species
  %thead
    %tr
      %td
      %th Measurement
      // %th Citation
      %th Source
      %th User
  %tbody
    - @species.lifespans.each_with_index do |lifespan, i|
      %tr
        -if i == 0
          %th{:rel => 'row', :colspan => @species.lifespans.length} Lifespan
        %td.lifespan= lifespan
        // %td.citation= lifespan.citation
        %td.Source 
        %td.User
          = "#{lifespan.created_by} [#{lifespan.created_by.karma}]" unless lifespan.created_by.nil?
  %tbody
    - @species.birth_weights.each_with_index do |birth_weight, i|
      %tr
        -if i == 0
          %th{:rel => 'row', :colspan => @species.birth_weights.length} Birth Weight
        %td.birth_weight= birth_weight
        // %td.citation= birth_weight.citation
        %td.Source 
        %td.User
          = "#{birth_weight.created_by} [#{birth_weight.created_by.karma}]" unless birth_weight.created_by.nil?
  %tbody      
    - @species.adult_weights.each_with_index do |adult_weight, i|
      %tr
        -if i == 0
          %th{:rel => 'row', :colspan => @species.adult_weights.length} Adult Weight
        %td.adult_weight= adult_weight
        // %td.citation= adult_weight.citation
        %td.Source 
        %td.User
          = "#{adult_weight.created_by} [#{adult_weight.created_by.karma}]" unless adult_weight.created_by.nil?
  %tbody      
    - @species.litter_sizes.each_with_index do |litter_size, i|
      %tr
        -if i == 0
          %th{:rel => 'row', :colspan => @species.litter_sizes.length} Litter Size
        %td.litter_size= litter_size
        // %td.citation= litter_size.citation
        %td.Source
        %td.User
          = "#{litter_size.created_by} [#{litter_size.created_by.karma}]" unless litter_size.created_by.nil?
  %tbody
    %tr
      %th References
    - @species.references.each do |reference|
      %tr
        %td.reference{:colspan => 4}= reference
      

- if current_user
  = link_to 'Add Lifespan', new_lifespan_path(@species), :class => "button"
  = link_to 'Add Adult Weight', new_adult_weight_path(@species), :class => "button"
  = link_to 'Add Birth Weight', new_birth_weight_path(@species), :class => "button"
  = link_to 'Add Litter Size', new_litter_size_path(@species), :class => "button"